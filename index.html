<script>
    function updateKey() {
        const urlParams = new URLSearchParams(window.location.search);
        let hwid = (urlParams.get('hwid') || "UNKNOWN").trim();
        
        const now = Date.now();
        const timeStep = Math.floor(now / 30000); // 30 giây
        const secret = "BANANAVIP";
        
        // Công thức tạo mã: btoa(hwid + timeStep + secret)
        const generatedKey = "BNN_" + btoa(hwid + timeStep + secret).substring(0, 12).toUpperCase();
        
        document.getElementById('key-val').innerText = generatedKey;
        
        const secondsLeft = 30 - Math.floor((now % 30000) / 1000);
        document.getElementById('timer').innerText = "KEY MỚI TRONG: " + secondsLeft + "s";
    }
    setInterval(updateKey, 1000);
    updateKey();
</script>
